[Mobile App (Expo RN)]
        |
        | 1) Google Auth (PKCE dans l’app)
        v
 [Google Identity Platform]
        |
        | 2) id_token (JWT Google)
        v
 [Auth API (Spring Boot)]
   - Vérifie id_token (JWK Google)
   - Crée/MAJ utilisateur
   - Émet access_token (JWT App)
        |
        | 3) access_token (Bearer)
        v
 [API métiers (Gateway + Services)]

App -> Google: Auth Code + PKCE (via expo-auth-session)
Google -> App: id_token
App -> Auth API: POST /auth/google { idToken }
Auth API -> Google JWKs: Récupère clés publiques (cache)
Auth API: Vérifie signature + iss + aud + exp du id_token
Auth API: findOrCreate(User), émet JWT (HS256) + refreshToken (optionnel)
Auth API -> App: { accessToken, refreshToken? }
App -> APIs: Authorization: Bearer accessToken
APIs (Spring Security): valident JWT App et servent la requête

[App RN] --(start)--> /auth/mobile/google/start --(AuthSession ouvre navigateur)--> Google
^ |
| v
(redirect myapp://oauthredirect?code&state) [Backend reçoit Google callback]
| |
+---- POST /auth/mobile/exchange (code,state) <-----+
|
v
{access, refresh, user}
|
[stockage + Redux]
|
appels API → Authorization: Bearer <access>
|
401 ?
|
POST /auth/refresh (refresh)
|
nouveau access token + retry
